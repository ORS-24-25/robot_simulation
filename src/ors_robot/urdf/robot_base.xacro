<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro" name="ors_robot">

  <!-- Properties -->
  <xacro:property name="mesh_base_path" value="package://ors_robot/meshes/" />
  <xacro:property name="base_color" value="0.964705882352941 0.964705882352941 0.952941176470588 1" />
  <xacro:property name="wheel_color" value="0.792156862745098 0.819607843137255 0.933333333333333 1" />
  <xacro:property name="lidar_color" value="0.792156862745098 0.819607843137255 0.933333333333333 1" />
  <xacro:property name="camera_color" value="0.898039215686275 0.917647058823529 0.929411764705882 1" />

  <!-- Macro for Link with Mesh -->
  <xacro:macro name="link_with_mesh" params="name mass ixx ixy ixz iyy iyz izz mesh color">
    <link name="${name}">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <mass value="${mass}" />
        <inertia ixx="${ixx}" ixy="${ixy}" ixz="${ixz}" iyy="${iyy}" iyz="${iyz}" izz="${izz}" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh}" />
        </geometry>
        <material name="">
          <color rgba="${color}" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh}" />
        </geometry>
      </collision>
    </link>
  </xacro:macro>

  <!-- Base Link -->
  <xacro:link_with_mesh 
    name="base_link" 
    mass="3.75941738254691" 
    ixx="0.0302625393343646" ixy="0.000494029605687653" ixz="0.000877895110474979" 
    iyy="0.0183790893714639" iyz="3.90426116410347E-05" izz="0.0454611424589501" 
    mesh="${mesh_base_path}base_link.STL" 
    color="${base_color}" />

  <!-- Left Wheel -->
  <xacro:link_with_mesh 
    name="left_wheel" 
    mass="0.0610725611857856" 
    ixx="2.0932620346428E-05" ixy="4.70726299862862E-31" ixz="-2.66341320047295E-16" 
    iyy="2.0932620346428E-05" iyz="-8.67742268246757E-21" izz="3.95750196483891E-05" 
    mesh="${mesh_base_path}left_wheel.STL" 
    color="${wheel_color}" />

  <!-- Right Wheel -->
  <xacro:link_with_mesh 
    name="right_wheel" 
    mass="0.0610725611857856" 
    ixx="2.0932620346428E-05" ixy="3.70181437751706E-31" ixz="-2.66341411820888E-16" 
    iyy="2.0932620346428E-05" iyz="-8.74736255787152E-21" izz="3.95750196483891E-05" 
    mesh="${mesh_base_path}right_wheel.STL" 
    color="${wheel_color}" />

  <!-- Front Wheel -->
  <xacro:link_with_mesh 
    name="front_wheel" 
    mass="0.00785398163397449" 
    ixx="6.05411084285534E-07" ixy="4.0573618672563E-33" ixz="3.03941757673171E-18" 
    iyy="6.05411084285534E-07" iyz="-1.54167304373854E-22" izz="3.92699081698725E-07" 
    mesh="${mesh_base_path}front_wheel.STL" 
    color="${wheel_color}" />

  <!-- Plate -->
  <xacro:link_with_mesh 
    name="plate" 
    mass="0.391942695372502" 
    ixx="0.002124680445083" ixy="3.21655738947554E-16" ixz="-3.65115980107875E-17" 
    iyy="0.00211257768873928" iyz="-1.8488967635126E-23" izz="0.00421569304990099" 
    mesh="${mesh_base_path}plate.STL" 
    color="${base_color}" />

  <!-- M2M2 LIDAR -->
  <xacro:link_with_mesh 
    name="M2M2_LIDAR" 
    mass="0.144547687439008" 
    ixx="0.000167357888369665" ixy="7.58898386397937E-10" ixz="1.54108302065642E-08" 
    iyy="0.000166948275602806" iyz="4.60881838904236E-08" izz="0.000189951798778922" 
    mesh="${mesh_base_path}M2M2_LIDAR.STL" 
    color="${lidar_color}" />

  <!-- Depth Camera -->
  <xacro:link_with_mesh 
    name="depth_cam" 
    mass="0.118265203799494" 
    ixx="7.81722838749596E-05" ixy="7.60380877739042E-07" ixz="-3.98560089919681E-07" 
    iyy="9.42229928199424E-06" iyz="-4.76491397960946E-09" izz="7.76440264747213E-05" 
    mesh="${mesh_base_path}depth_cam.STL" 
    color="${camera_color}" />

  <!-- Joints -->
  <joint name="left_wheel" type="continuous">
    <origin xyz="-0.0129112176850158 -0.117664217504032 0.025328779706945" rpy="-1.5707963267949 0 0" />
    <parent link="base_link" />
    <child link="left_wheel" />
    <axis xyz="0 0 -1" />
    <limit effort="10" velocity="10" />
    <dynamics damping="0.1" friction="0.1" />
  </joint>

  <joint name="right_wheel" type="continuous">
    <origin xyz="-0.0129112176873895 0.117549999993357 0.025328779706945" rpy="-1.5707963267949 0 0" />
    <parent link="base_link" />
    <child link="right_wheel" />
    <axis xyz="0 0 1" />
    <limit effort="10" velocity="10" />
    <dynamics damping="0.1" friction="0.1" />
  </joint>

  <joint name="front_wheel" type="continuous">
    <origin xyz="0.112773589774212 5.4823545785343E-05 0.00132877970694717" rpy="-1.5707963267949 0 0" />
    <parent link="base_link" />
    <child link="front_wheel" />
    <axis xyz="0 0 -1" />
    <limit effort="10" velocity="10" />
    <dynamics damping="0" friction="0" />
  </joint>

  <joint name="plate" type="fixed">
    <origin xyz="-0.0127165282933757 3.07436914599446E-05 0.239828779706945" rpy="0 0 0" />
    <parent link="base_link" />
    <child link="plate" />
  </joint>

  <joint name="M2M2_LIDAR" type="fixed">
    <origin xyz="0.011257243470593 -5.35218498943779E-05 0.1054" rpy="0 0 0" />
    <parent link="plate" />
    <child link="M2M2_LIDAR" />
  </joint>

  <joint name="depth_cam" type="fixed">
    <origin xyz="0.149440914994276 0.00218526482966985 0.0123528880010465" rpy="0 0 0" />
    <parent link="plate" />
    <child link="depth_cam" />
  </joint>

</robot>
